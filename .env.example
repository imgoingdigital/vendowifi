
###############################################
# VendoWiFi Environment Sample (.env.example) #
###############################################
# Copy this file to `.env` and fill in real values.
# DO NOT commit `.env` (contains secrets). This sample stays in git.

# --- Database Connection (Two Options) ---
# 1. Provide full URLs (legacy/simple)
#    DATABASE_URL=postgres://vendowifi_app:replace_app_password@localhost:5432/vendowifi
#    MIGRATION_DATABASE_URL=postgres://vendowifi_owner:replace_owner_password@localhost:5432/vendowifi
# 2. Or provide component variables (preferred for easier rotation / templating):
DB_HOST=localhost
DB_PORT=5432
DB_NAME=vendowifi
DB_OWNER_USER=vendowifi_owner
DB_OWNER_PASSWORD=replace_owner_password
DB_APP_USER=vendowifi_app
DB_APP_PASSWORD=replace_app_password
# If DATABASE_URL / MIGRATION_DATABASE_URL are omitted, they will be synthesized from the above.

# If your password has special characters (@ : / # ? & %), URL-encode them.
# Example: p@ss:word -> p%40ss%3Aword

# --- Crypto / Security ---
# Bcrypt cost factor (higher = slower, 10â€“14 recommended)
BCRYPT_ROUNDS=12

# Pepper appended before hashing device API keys (rotate periodically & store securely)
DEVICE_API_PEPPER=change_me_device_pepper

# Session / JWT secret (will be used when auth layer added)
SESSION_SECRET=change_me_session_secret

# --- Authentication (Stack Auth) ---
# Values from your Stack project dashboard. Do NOT wrap in quotes.
NEXT_PUBLIC_STACK_PROJECT_ID=change_me_stack_project_id
NEXT_PUBLIC_STACK_PUBLISHABLE_CLIENT_KEY=change_me_publishable_client_key
STACK_SECRET_SERVER_KEY=change_me_stack_server_secret
# Optional advanced keys (uncomment if/when needed):
# STACK_SUPER_SECRET_ADMIN_KEY=
# NEXT_PUBLIC_STACK_EXTRA_REQUEST_HEADERS=[]

# --- Internal / Recovery Secrets ---
# Long random strings used to authorize emergency or config reset flows.
BACKDOOR_RESET_SECRET=change_me_long_random_reset_secret
CONFIG_RESET_SECRET=change_me_long_random_config_secret

# --- Caching / Rate Limiting (optional) ---
# REDIS_URL=redis://localhost:6379

# --- Operational Toggles (reserved for future) ---
# RATE_LIMIT_WINDOW_MS=60000
# RATE_LIMIT_MAX=100

# --- Notes ---
# 1. Create roles:
#    CREATE ROLE vendowifi_owner LOGIN PASSWORD 'replace_owner_password';
#    CREATE ROLE vendowifi_app   LOGIN PASSWORD 'replace_app_password';
#    CREATE DATABASE vendowifi OWNER vendowifi_owner;
# 2. Grants after initial migration (run inside DB):
#    REVOKE ALL ON SCHEMA public FROM public;
#    GRANT USAGE ON SCHEMA public TO vendowifi_app;
#    GRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA public TO vendowifi_app;
#    ALTER DEFAULT PRIVILEGES FOR ROLE vendowifi_owner IN SCHEMA public
#      GRANT SELECT, INSERT, UPDATE, DELETE ON TABLES TO vendowifi_app;
#    GRANT USAGE, SELECT, UPDATE ON ALL SEQUENCES IN SCHEMA public TO vendowifi_app;
#    ALTER DEFAULT PRIVILEGES FOR ROLE vendowifi_owner IN SCHEMA public
#      GRANT USAGE, SELECT, UPDATE ON SEQUENCES TO vendowifi_app;

# 3. If you see the app connecting as postgres, verify your `.env` exists and is not named `.env.txt`.

# 4. For Windows PowerShell: ensure environment is loaded by placing the `.env` file in project root; drizzle-kit auto-loads via dotenv.

# 5. Do not add quotes around values unless they intentionally form part of the secret.

# End of sample
